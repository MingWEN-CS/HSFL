334,335c334,336
<       UnionType that, boolean tolerateUnknowns) {
<     if (!tolerateUnknowns && alternates.size() != that.alternates.size()) {
---
>       UnionType that, EquivalenceMethod eqMethod) {
>     if (eqMethod == EquivalenceMethod.IDENTITY
>         && alternates.size() != that.alternates.size()) {
339c340
<       if (!hasAlternate(alternate, tolerateUnknowns)) {
---
>       if (!hasAlternate(alternate, eqMethod)) {
346c347
<   private boolean hasAlternate(JSType type, boolean tolerateUnknowns) {
---
>   private boolean hasAlternate(JSType type, EquivalenceMethod eqMethod) {
348c349
<       if (alternate.checkEquivalenceHelper(type, tolerateUnknowns)) {
---
>       if (alternate.checkEquivalenceHelper(type, eqMethod)) {
