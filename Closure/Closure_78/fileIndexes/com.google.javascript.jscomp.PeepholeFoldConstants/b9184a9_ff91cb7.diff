1320d1319
<         NodeUtil.isSparseArray(arrayNode) ||
1325,1326d1323
<     
< 
1335c1332
<       if (NodeUtil.isImmutableValue(elem)) {
---
>       if (NodeUtil.isImmutableValue(elem) || elem.getType() == Token.EMPTY) {
1527,1529c1524
<     if (left.getType() == Token.ARRAYLIT && !NodeUtil.isSparseArray(left)) {
<       
< 
---
>     if (left.getType() == Token.ARRAYLIT) {
1557a1553,1558
>       if (elem.getType() == Token.EMPTY) {
>         elem = NodeUtil.newUndefinedNode(elem);
>       } else {
>         left.removeChild(elem);
>       }
> 
1559d1559
<       left.removeChild(elem);
1578,1579c1578
<           
<           if (NodeUtil.isSparseArray(left) || mayHaveSideEffects(left)) {
---
>           if (mayHaveSideEffects(left)) {
