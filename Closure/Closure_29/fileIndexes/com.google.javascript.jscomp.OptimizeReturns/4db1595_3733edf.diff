95,96c95
<     
<     if (SimpleDefinitionFinder.maybeExported(compiler, definition)) {
---
>     if (!defFinder.canModifyDefinition(definition)) {
101,109d99
< 
<     
<     
<     
<     
<     if (useSites.isEmpty()) {
<       return true;
<     }
< 
111,124d100
<       
<       
< 
<       
<       
<       
< 
<       Node nameNode = site.node;
<       Collection<Definition> singleSiteDefinitions =
<           defFinder.getDefinitionsReferencedAt(nameNode);
<       if (singleSiteDefinitions.size() > 1) {
<         return true;
<       }
< 
