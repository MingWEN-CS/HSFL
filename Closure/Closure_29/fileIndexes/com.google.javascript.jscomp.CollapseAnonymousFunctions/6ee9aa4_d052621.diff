66c66
<       if (!(parent.getType() == Token.SCRIPT ||
---
>       if (!(parent.isScript() ||
68,69c68,69
<             grandparent.getType() == Token.FUNCTION &&
<             parent.getType() == Token.BLOCK)) {
---
>             grandparent.isFunction() &&
>             parent.isBlock())) {
79c79
<           value.getType() == Token.FUNCTION &&
---
>           value.isFunction() &&
108c108
<       if (n.getType() == Token.NAME && n.getString().equals(name)) {
---
>       if (n.isName() && n.getString().equals(name)) {
