413,415c413
<       return NodeUtil.isFunctionDeclaration(parent) &&
<           (grandparent.getType() == Token.SCRIPT ||
<            grandparent.getParent().getType() == Token.FUNCTION);
---
>       return NodeUtil.isHoistedFunctionDeclaration(parent);
496c494
<     private final boolean mayBeHoisted;
---
>     private final boolean isHoisted;
507,508c505
<       this.mayBeHoisted = (root.getType() == Token.FUNCTION) &&
<           !NodeUtil.isFunctionAnonymous(root);
---
>       this.isHoisted = NodeUtil.isHoistedFunctionDeclaration(root);
526c523
<         if (currentBlock.mayBeHoisted) {
---
>         if (currentBlock.isHoisted) {
