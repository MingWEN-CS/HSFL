260,267c260,274
<       Node rootParent = rootNode.getParent();
<       if (rootParent.getType() == Token.ASSIGN) {
<         Node owner = rootParent.getFirstChild();
<         while (owner.getType() == Token.GETPROP) {
<           owner = owner.getFirstChild();
<         }
<         if (owner.getType() == Token.NAME && owner.getString().equals(name)) {
<           recursive = true;
---
> 
> 
>       
>       
>       for  (Scope s = t.getScope(); s.getParent() != null; s = s.getParent()) {
>         Node curRoot = s.getRootNode();
>         if (curRoot.getParent().getType() == Token.ASSIGN) {
>           Node owner = curRoot.getParent().getFirstChild();
>           while (owner.getType() == Token.GETPROP) {
>             owner = owner.getFirstChild();
>           }
>           if (owner.getType() == Token.NAME && owner.getString().equals(name)) {
>             recursive = true;
>             break;
>           }
