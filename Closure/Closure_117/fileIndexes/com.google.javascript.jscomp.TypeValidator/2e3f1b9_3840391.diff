28a29
> import static com.google.javascript.rhino.jstype.JSTypeRegistry.OBJECT_INDEX_TEMPLATE;
336,337c337,341
<       if (dereferenced != null && dereferenced.getIndexType() != null) {
<         expectCanAssignTo(t, indexNode, indexType, dereferenced.getIndexType(),
---
>       if (dereferenced != null && dereferenced
>           .getTemplateTypeMap()
>           .hasTemplateKey(OBJECT_INDEX_TEMPLATE)) {
>         expectCanAssignTo(t, indexNode, indexType, dereferenced
>             .getTemplateTypeMap().getTemplateType(OBJECT_INDEX_TEMPLATE),
