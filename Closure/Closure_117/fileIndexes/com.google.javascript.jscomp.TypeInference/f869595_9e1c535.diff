1162,1183d1161
<   private static class TemplateTypeMapReplacer extends ModificationVisitor {
<     private final TemplateTypeMap replacements;
<     boolean madeChanges = false;
< 
<     TemplateTypeMapReplacer(
<         JSTypeRegistry registry, TemplateTypeMap replacements) {
<       super(registry);
<       this.replacements = replacements;
<     }
< 
<     @Override
<     public JSType caseTemplateType(TemplateType type) {
<       if (replacements.hasTemplateKey(type)) {
<         madeChanges = true;
<         JSType replacement = replacements.getTemplateType(type);
<         return replacements.getTemplateType(type);
<       } else {
<         return type;
<       }
<     }
<   }
< 
