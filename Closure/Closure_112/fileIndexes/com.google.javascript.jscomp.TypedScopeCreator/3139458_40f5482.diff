54d53
< import com.google.common.collect.Multiset;
1875,1883d1873
< 
<         for (Multiset.Entry<String> entry :
<                  contents.getAssignedNameCounts().entrySet()) {
<           Var v = scope.getVar(entry.getElement());
<           Preconditions.checkState(v.getScope() == scope);
<           if (entry.getCount() == 1) {
<             v.markAssignedExactlyOnce();
<           }
<         }
1994,1998c1984
<       if (t.getScopeDepth() <= 1) {
<         
<         
<         
<         
---
>       if (t.getScopeDepth() <= 2) {
2006,2009c1992
<       if (n.isName() && NodeUtil.isLValue(n) &&
<           
<           
<           !NodeUtil.isBleedingFunctionName(n)) {
---
>       if (n.isName() && NodeUtil.isLValue(n)) {
2015,2018d1997
<           if (ownerScope.isLocal()) {
<             data.get(ownerScope.getRootNode()).recordAssignedName(name);
<           }
< 
