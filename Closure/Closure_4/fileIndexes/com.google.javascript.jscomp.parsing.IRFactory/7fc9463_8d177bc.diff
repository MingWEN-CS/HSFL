305,309c305,312
<     
<     if (irNode.getType() == Token.FUNCTION &&
<         irNode.getFirstChild().getLineno() != -1) {
<       irNode.setLineno(irNode.getFirstChild().getLineno());
<       irNode.setCharno(irNode.getFirstChild().getCharno());
---
>     if (irNode.getLineno() == -1) {
>       
>       
>       
>       int lineno = node.getLineno();
>       irNode.setLineno(lineno);
>       int charno = position2charno(node.getAbsolutePosition());
>       irNode.setCharno(charno);
311,321d313
<     } else {
<       if (irNode.getLineno() == -1) {
<         
<         
<         
<         int lineno = node.getLineno();
<         irNode.setLineno(lineno);
<         int charno = position2charno(node.getAbsolutePosition());
<         irNode.setCharno(charno);
<         maybeSetLengthFrom(irNode, node);
<       }
