412,444d411
<     } else {
<       TernaryValue rightVal = NodeUtil.getBooleanValue(right);
<       if (rightVal != TernaryValue.UNKNOWN) {
< 
<       
<       
<       
<       
<       
<       
<       
<       
<       int pt = parent.getType();
<       if (pt == Token.IF || pt == Token.WHILE || pt == Token.DO ||
<           (pt == Token.FOR && NodeUtil.getConditionExpression(parent) == n) ||
<           (pt == Token.HOOK && parent.getFirstChild() == n)) {
<         boolean rval = rightVal.toBoolean(true);
< 
<         
<         
<         if (type == Token.OR && !rval ||
<             type == Token.AND && rval) {
<           result = left;
<         } else {
<           
<           
<           
<           if (!mayHaveSideEffects(left)) {
<             result = right;
<           }
<         }
<         }
<       }
447d413
<     
