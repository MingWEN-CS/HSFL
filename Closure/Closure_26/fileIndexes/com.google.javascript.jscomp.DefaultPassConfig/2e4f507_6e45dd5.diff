175a176,185
>   void maybeInitializePreprocessorSymbolTable(AbstractCompiler compiler) {
>     if (options.ideMode) {
>       Node root = compiler.getRoot();
>       if (preprocessorSymbolTable == null ||
>           preprocessorSymbolTable.getRootNode() != root) {
>         preprocessorSymbolTable = new PreprocessorSymbolTable(root);
>       }
>     }
>   }
> 
835a846
>       maybeInitializePreprocessorSymbolTable(compiler);
837a849
>           preprocessorSymbolTable,
880,884c892
<       if (options.ideMode) {
<         preprocessorSymbolTable =
<             new PreprocessorSymbolTable(compiler.getRoot());
<       }
< 
---
>       maybeInitializePreprocessorSymbolTable(compiler);
