1a2,79
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> package com.google.javascript.jscomp;
> 
> import com.google.javascript.jscomp.CheckLevel;
> import com.google.javascript.jscomp.NodeTraversal.AbstractPostOrderCallback;
> import com.google.javascript.rhino.Node;
> import com.google.javascript.rhino.Token;
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> final class CheckAccidentalSemicolon extends AbstractPostOrderCallback {
> 
>   static final DiagnosticType SUSPICIOUS_SEMICOLON = DiagnosticType.warning(
>       "JSC_SUSPICIOUS_SEMICOLON",
>       "If this if/for/while really shouldn't have a body, use {}");
> 
>   private final CheckLevel level;
> 
>   CheckAccidentalSemicolon(CheckLevel level) {
>     this.level = level;
>   }
> 
>   public void visit(NodeTraversal t, Node n, Node parent) {
>     Node child;
>     switch (n.getType()) {
>       case Token.IF:
>       case Token.WHILE:
>         child = n.getFirstChild().getNext();  
>         break;
> 
>       case Token.FOR:
>         child = n.getFirstChild().getNext().getNext();
>         if (child.getNext() != null) {
>           
>           child = child.getNext();
>         }
>         break;
> 
>       default:
>         return;  
>     }
> 
>     
>     
>     for (; child != null; child = child.getNext()) {
>       if ((child.getType() == Token.BLOCK) && (!child.hasChildren())) {
>         
>         
>         if (child.wasEmptyNode()) {
>           t.getCompiler().report(
>               JSError.make(t, n, level, SUSPICIOUS_SEMICOLON));
>         }
>       }
>     }
>   }
> }
