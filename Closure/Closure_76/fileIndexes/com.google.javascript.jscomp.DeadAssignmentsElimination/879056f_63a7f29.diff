293,296c293,299
<       for(Node sibling = n.getNext(); sibling != null;
<           sibling = sibling.getNext()) {
<         if (!ControlFlowGraph.isEnteringNewCfgNode(sibling)) {
<           VariableLiveness state = isVariableReadBeforeKill(sibling, variable);
---
>       VariableLiveness state = VariableLiveness.MAYBE_LIVE;
>       switch (n.getParent().getType()) {
>         case Token.OR:
>         case Token.AND:
>           
>           
>           
297a301
>         case Token.HOOK:
299,302c303,317
<           if (state == VariableLiveness.READ) {
<             return true;
<           } else if (state == VariableLiveness.KILL) {
<             return false;
---
>           
>           
> 
>         default:
>           for(Node sibling = n.getNext(); sibling != null;
>               sibling = sibling.getNext()) {
>             if (!ControlFlowGraph.isEnteringNewCfgNode(sibling)) {
>             state = isVariableReadBeforeKill(sibling, variable);
> 
>       
>       if (state == VariableLiveness.READ) {
>         return true;
>       } else if (state == VariableLiveness.KILL) {
>         return false;
>             }
304c319
<         }
---
>       }
324a340
> 
342,348c358,376
<     
<     for (Node child = n.getFirstChild();
<         child != null; child = child.getNext()) {
<       if (!ControlFlowGraph.isEnteringNewCfgNode(child)) { 
<         VariableLiveness state = isVariableReadBeforeKill(child, variable);
<         if (state != VariableLiveness.MAYBE_LIVE) {
<           return state;
---
>     switch (n.getType()) {
>       
>       case Token.OR:
>       case Token.AND:
>         
>         
>       case Token.HOOK:
>         return checkHookBranchReadBeforeKill(
>             n.getFirstChild().getNext(), n.getLastChild(), variable);
> 
>       default:
>         
>         for (Node child = n.getFirstChild();
>             child != null; child = child.getNext()) {
>           if (!ControlFlowGraph.isEnteringNewCfgNode(child)) { 
>           VariableLiveness state = isVariableReadBeforeKill(child, variable);
>           if (state != VariableLiveness.MAYBE_LIVE) {
>             return state;
>           }
351a380
> 
352a382,399
>   }
> 
>   private VariableLiveness checkHookBranchReadBeforeKill(
>       Node trueCase, Node falseCase, String variable) {
>     VariableLiveness v1 = isVariableReadBeforeKill(
>       trueCase, variable);
>     VariableLiveness v2 = isVariableReadBeforeKill(
>       falseCase, variable);
>     
>     
>     
>     if (v1 == VariableLiveness.READ || v2 == VariableLiveness.READ) {
>       return VariableLiveness.READ;
>     } else if (v1 == VariableLiveness.KILL && v2 == VariableLiveness.KILL) {
>       return VariableLiveness.KILL;
>     } else {
>       return VariableLiveness.MAYBE_LIVE;
>     }
