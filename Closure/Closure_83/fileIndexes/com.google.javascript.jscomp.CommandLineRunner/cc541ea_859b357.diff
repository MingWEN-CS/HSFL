18a19,20
> import com.google.common.base.Preconditions;
> import com.google.common.collect.ImmutableList;
19a22
> import com.google.common.collect.Maps;
34a38
> import java.util.Map;
487a492,539
>   private static final List<String> DEFAULT_EXTERNS_NAMES = ImmutableList.of(
>     
>     "es3.js",
>     "es5.js",
> 
>     
>     "w3c_event.js",
>     "w3c_event3.js",
>     "gecko_event.js",
>     "ie_event.js",
>     "webkit_event.js",
> 
>     
>     "w3c_dom1.js",
>     "w3c_dom2.js",
>     "w3c_dom3.js",
>     "gecko_dom.js",
>     "ie_dom.js",
>     "webkit_dom.js",
> 
>     
>     "w3c_css.js",
>     "gecko_css.js",
>     "ie_css.js",
>     "webkit_css.js",
> 
>     
>     "google.js",
> 
>     "deprecated.js",
>     "fileapi.js",
>     "flash.js",
>     "gears_symbols.js",
>     "gears_types.js",
>     "gecko_xml.js",
>     "html5.js",
>     "ie_vml.js",
>     "iphone.js",
>     "webstorage.js",
>     "w3c_elementtraversal.js",
>     "w3c_geolocation.js",
>     "w3c_range.js",
>     "w3c_selectors.js",
>     "w3c_xml.js",
>     "window.js",
>     "webkit_notifications.js");
> 
>   
495c547
<     List<JSSourceFile> externs = Lists.newLinkedList();
---
>     Map<String, JSSourceFile> externsMap = Maps.newHashMap();
498c550,555
<       externs.add(JSSourceFile.fromInputStream(entry.getName(), entryStream));
---
>       externsMap.put(entry.getName(),
>           JSSourceFile.fromInputStream(
>               
>               
>               "externs.zip
>               entryStream));
499a557,568
> 
>     Preconditions.checkState(
>         externsMap.keySet().equals(Sets.newHashSet(DEFAULT_EXTERNS_NAMES)),
>         "Externs zip must match our hard-coded list of externs.");
> 
>     
>     
>     List<JSSourceFile> externs = Lists.newArrayList();
>     for (String key : DEFAULT_EXTERNS_NAMES) {
>       externs.add(externsMap.get(key));
>     }
> 
