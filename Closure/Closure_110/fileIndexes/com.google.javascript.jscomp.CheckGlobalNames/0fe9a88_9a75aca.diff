150a151,153
>       
>       boolean isGlobalExpr = ref.getNode().getParent().isExprResult();
> 
152c155,157
<         reportRefToUndefinedName(name, ref);
---
>         if (!isGlobalExpr) {
>           reportRefToUndefinedName(name, ref);
>         }
235,237c240,261
<     return name.parent != null && name.parent.aliasingGets == 0 &&
<         name.parent.type == Name.Type.OBJECTLIT &&
<         !objectPrototypeProps.contains(name.getBaseName());
---
>     
>     
>     
>     if (name.parent == null || name.parent.aliasingGets > 0) {
>       return false;
>     }
> 
>     if (objectPrototypeProps.contains(name.getBaseName())) {
>       return false;
>     }
> 
>     if (name.parent.type == Name.Type.OBJECTLIT) {
>       return true;
>     }
> 
>     if (name.parent.type == Name.Type.FUNCTION &&
>         name.parent.isDeclaredType() &&
>         !functionPrototypeProps.contains(name.getBaseName())) {
>       return true;
>     }
> 
>     return false;
