150,154c150,156
<       for (Node ancestor : n.getAncestors()) {
<         if (NodeUtil.isControlStructure(ancestor)) {
<           
<           compiler.report(t.makeError(n, CONDITIONAL_ID_GENERATOR_CALL));
<           return;
---
>       if (!consistent) {
>         for (Node ancestor : n.getAncestors()) {
>           if (NodeUtil.isControlStructure(ancestor)) {
>             
>             compiler.report(t.makeError(n, CONDITIONAL_ID_GENERATOR_CALL));
>             return;
>           }
