98,113c98,109
<     int pt = parent.getType();
<     if (pt == Token.COMMA) {
<       Node gramps = parent.getParent();
<       if (gramps.isCall() &&
<           parent == gramps.getFirstChild()) {
<         
<         
<         
<         
<         if (n == parent.getFirstChild() &&
<             parent.getChildCount() == 2 &&
<             n.getNext().isName() &&
<             "eval".equals(n.getNext().getString())) {
<           return;
<         }
<       }
---
>     
>     
>     
>     if (n.isExprResult()) {
>       return;
>     }
> 
>     
>     
>     if (n.isQualifiedName() && n.getJSDocInfo() != null) {
>       return;
>     }
114a111,116
>     boolean isResultUsed = NodeUtil.isExpressionResultUsed(n);
>     boolean isSimpleOp = NodeUtil.isSimpleOperatorType(n.getType());
>     if (parent.getType() == Token.COMMA) {
>       if (isResultUsed) {
>         return;
>       }
118,124c120,122
<           if (ancestorType == Token.COMMA)
<             continue;
<           if (ancestorType != Token.EXPR_RESULT &&
<               ancestorType != Token.BLOCK)
<             return;
<           else
<             break;
---
>           if (ancestorType == Token.COMMA) continue;
>           if (ancestorType != Token.EXPR_RESULT && ancestorType != Token.BLOCK) return;
>           else break;
127,146c125,126
<     } else if (pt != Token.EXPR_RESULT && pt != Token.BLOCK) {
<       if (pt == Token.FOR && parent.getChildCount() == 4 &&
<           (n == parent.getFirstChild() ||
<            n == parent.getFirstChild().getNext().getNext())) {
<         
<         
<       } else {
<         return;  
<       }
<     }
< 
<     boolean isSimpleOp = NodeUtil.isSimpleOperatorType(n.getType());
<     if (isSimpleOp ||
<         !NodeUtil.mayHaveSideEffects(n, t.getCompiler())) {
<       if (n.isQualifiedName() && n.getJSDocInfo() != null) {
<         
<         
<         return;
<       } else if (n.isExprResult()) {
<         
---
>     } else if (parent.getType() != Token.EXPR_RESULT && parent.getType() != Token.BLOCK) {
>       if (! (parent.getType() == Token.FOR && parent.getChildCount() == 4 && (n == parent.getFirstChild() || n == parent.getFirstChild().getNext().getNext()))) {
149c129,131
< 
---
>     }
>     if (
>         (isSimpleOp || !NodeUtil.mayHaveSideEffects(n, t.getCompiler()))) {
