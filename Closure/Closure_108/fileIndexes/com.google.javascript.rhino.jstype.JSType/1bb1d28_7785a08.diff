570c570,571
<   boolean checkEquivalenceHelper(JSType that, EquivalenceMethod eqMethod) {
---
>   boolean checkEquivalenceHelper(
>       final JSType that, EquivalenceMethod eqMethod) {
616,617c617,619
<       return toObjectType().getReferenceName().equals(
<           that.toObjectType().getReferenceName());
---
>       
>       return getConcreteNominalTypeName(this.toObjectType()).equals(
>           getConcreteNominalTypeName(that.toObjectType()));
621c623,625
<       return this == that;
---
>       
>       
>       return false;
641c645,657
<     return this == that;
---
>     return false;
>   }
> 
>   
>   private String getConcreteNominalTypeName(ObjectType objType) {
>     if (objType instanceof ProxyObjectType) {
>       ObjectType internal = ((ProxyObjectType) objType)
>           .getReferencedObjTypeInternal();
>       if (internal != null && internal.isNominalType()) {
>         return getConcreteNominalTypeName(internal);
>       }
>     }
>     return objType.getReferenceName();
