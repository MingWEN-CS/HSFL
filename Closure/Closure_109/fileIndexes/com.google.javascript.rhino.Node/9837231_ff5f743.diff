1137,1139c1137,1144
<     int lineOffset = file == null ?
<         Integer.MIN_VALUE : file.getLineOffset(getLineno());
<     return lineOffset + getCharno();
---
>     if (file == null) {
>       return -1;
>     }
>     int lineno = getLineno();
>     if (lineno == -1) {
>       return -1;
>     }
>     return file.getLineOffset(lineno) + getCharno();
