335c335
<     TernaryValue leftVal = NodeUtil.getBooleanValue(left);
---
>     TernaryValue leftVal = NodeUtil.getPureBooleanValue(left);
532c532
<     TernaryValue leftVal = NodeUtil.getBooleanValue(left);
---
>     TernaryValue leftVal = NodeUtil.getImpureBooleanValue(left);
543c543
<       } else {
---
>       } else if (!mayHaveSideEffects(left)) {
