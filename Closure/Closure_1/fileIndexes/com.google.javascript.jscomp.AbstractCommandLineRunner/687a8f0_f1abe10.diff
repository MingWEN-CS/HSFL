230,232c230,247
<     options.setManageClosureDependencies(config.manageClosureDependencies);
<     if (config.closureEntryPoints.size() > 0) {
<       options.setManageClosureDependencies(config.closureEntryPoints);
---
>     if (config.onlyClosureDependencies) {
>       if (config.closureEntryPoints.isEmpty()) {
>         throw new FlagUsageException("When only_closure_dependencies is "
>           + "on, you must specify at least one closure_entry_point");
>       }
> 
>       options.setDependencyOptions(new DependencyOptions()
>           .setDependencyPruning(true)
>           .setDependencySorting(true)
>           .setMoocherDropping(true)
>           .setEntryPoints(config.closureEntryPoints));
>     } else if (config.manageClosureDependencies ||
>         config.closureEntryPoints.size() > 0) {
>       options.setDependencyOptions(new DependencyOptions()
>           .setDependencyPruning(true)
>           .setDependencySorting(true)
>           .setMoocherDropping(false)
>           .setEntryPoints(config.closureEntryPoints));
1880a1896,1907
>       return this;
>     }
> 
>     private boolean onlyClosureDependencies = false;
> 
>     
> 
> 
> 
> 
>     CommandLineConfig setOnlyClosureDependencies(boolean newVal) {
>       this.onlyClosureDependencies = newVal;
