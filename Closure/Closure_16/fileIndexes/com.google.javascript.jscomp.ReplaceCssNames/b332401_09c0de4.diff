59a60,80
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
185,196c206,212
<       if (symbolMap != null || cssNames != null) {
<         String[] parts = n.getString().split("-");
<         for (int i = 0; i < parts.length; i++) {
<           if (cssNames != null) {
<             Integer count = cssNames.get(parts[i]);
<             if (count == null) {
<               count = Integer.valueOf(0);
<             }
<             cssNames.put(parts[i], count.intValue() + 1);
<           }
<           if (symbolMap != null) {
<             String replacement = symbolMap.get(parts[i]);
---
>       String name = n.getString();
>       String[] parts = name.split("-");
>       if (symbolMap != null) {
>         String replacement = null;
>         switch (symbolMap.getStyle()) {
>           case BY_WHOLE:
>             replacement = symbolMap.get(name);
198,200c214,215
<               
<               compiler.report(t.makeError(
<                   n, UNKNOWN_SYMBOL_WARNING, parts[i], n.getString()));
---
>               compiler.report(
>                   t.makeError(n, UNKNOWN_SYMBOL_WARNING, name, name));
203,204c218,235
<             parts[i] = replacement;
<           }
---
>             break;
>           case BY_PART:
>             String[] replaced = new String[parts.length];
>             for (int i = 0; i < parts.length; i++) {
>               String part = symbolMap.get(parts[i]);
>               if (part == null) {
>                 
>                 compiler.report(
>                     t.makeError(n, UNKNOWN_SYMBOL_WARNING, parts[i], name));
>                 return;
>               }
>               replaced[i] = part;
>             }
>             replacement = Joiner.on("-").join(replaced);
>             break;
>           default:
>             throw new IllegalStateException(
>               "Unknown replacement style: " + symbolMap.getStyle());
206,207c237,248
<         if (symbolMap != null) {
<           n.setString(Joiner.on("-").join(parts));
---
>         n.setString(replacement);
>       }
>       if (cssNames != null) {
>         
>         
>         
>         for (int i = 0; i < parts.length; i++) {
>           Integer count = cssNames.get(parts[i]);
>           if (count == null) {
>             count = Integer.valueOf(0);
>           }
>           cssNames.put(parts[i], count.intValue() + 1);
