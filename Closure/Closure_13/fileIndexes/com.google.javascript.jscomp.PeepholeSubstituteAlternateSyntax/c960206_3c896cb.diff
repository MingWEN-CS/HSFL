948c948
<              TernaryValue nVal = NodeUtil.getBooleanValue(first);
---
>              TernaryValue nVal = NodeUtil.getPureBooleanValue(first);
975,976c975,976
<         TernaryValue rightVal = NodeUtil.getBooleanValue(right);
<         if (NodeUtil.getBooleanValue(right) != TernaryValue.UNKNOWN) {
---
>         TernaryValue rightVal = NodeUtil.getPureBooleanValue(right);
>         if (NodeUtil.getPureBooleanValue(right) != TernaryValue.UNKNOWN) {
1017,1018c1017,1020
<         if (NodeUtil.getBooleanValue(trueNode) == TernaryValue.TRUE
<             && NodeUtil.getBooleanValue(falseNode) == TernaryValue.FALSE) {
---
>         TernaryValue trueNodeVal = NodeUtil.getPureBooleanValue(trueNode);
>         TernaryValue falseNodeVal = NodeUtil.getPureBooleanValue(falseNode);
>         if (trueNodeVal == TernaryValue.TRUE
>             && falseNodeVal == TernaryValue.FALSE) {
1022,1023c1024,1025
<         } else if (NodeUtil.getBooleanValue(trueNode) == TernaryValue.FALSE
<             && NodeUtil.getBooleanValue(falseNode) == TernaryValue.TRUE) {
---
>         } else if (trueNodeVal == TernaryValue.FALSE
>             && falseNodeVal == TernaryValue.TRUE) {
1027c1029
<         } else if (NodeUtil.getBooleanValue(trueNode) == TernaryValue.TRUE) {
---
>         } else if (trueNodeVal == TernaryValue.TRUE) {
1031c1033
<         } else if (NodeUtil.getBooleanValue(falseNode) == TernaryValue.FALSE) {
---
>         } else if (falseNodeVal == TernaryValue.FALSE) {
1048c1050
<         TernaryValue nVal = NodeUtil.getBooleanValue(n);
---
>         TernaryValue nVal = NodeUtil.getPureBooleanValue(n);
