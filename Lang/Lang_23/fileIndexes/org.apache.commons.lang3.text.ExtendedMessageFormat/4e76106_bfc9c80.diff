81c81
<     private Map registry;
---
>     private final Map<String, FormatFactory> registry;
111c111
<     public ExtendedMessageFormat(String pattern, Map registry) {
---
>     public ExtendedMessageFormat(String pattern, Map<String, FormatFactory> registry) {
123c123
<     public ExtendedMessageFormat(String pattern, Locale locale, Map registry) {
---
>     public ExtendedMessageFormat(String pattern, Locale locale, Map<String, FormatFactory> registry) {
150,151c150,151
<         ArrayList foundFormats = new ArrayList();
<         ArrayList foundDescriptions = new ArrayList();
---
>         ArrayList<Format> foundFormats = new ArrayList<Format>();
>         ArrayList<String> foundDescriptions = new ArrayList<String>();
200,201c200,201
<             for (Iterator it = foundFormats.iterator(); it.hasNext(); i++) {
<                 Format f = (Format) it.next();
---
>             for (Iterator<Format> it = foundFormats.iterator(); it.hasNext(); i++) {
>                 Format f = it.next();
261c261
<             FormatFactory factory = (FormatFactory) registry.get(name);
---
>             FormatFactory factory = registry.get(name);
350c350
<     private String insertFormats(String pattern, ArrayList customPatterns) {
---
>     private String insertFormats(String pattern, ArrayList<String> customPatterns) {
370c370
<                     String customPattern = (String) customPatterns.get(fe);
---
>                     String customPattern = customPatterns.get(fe);
470c470
<     private boolean containsElements(Collection coll) {
---
>     private boolean containsElements(Collection<?> coll) {
474c474
<         for (Iterator iter = coll.iterator(); iter.hasNext();) {
---
>         for (Iterator<?> iter = coll.iterator(); iter.hasNext();) {
