2637a2638,2639
> 
>         
2640a2643,2651
>         if (!iterator.hasNext()) {
>             return EMPTY;
>         }
>         Object first = iterator.next();
>         if (!iterator.hasNext()) {
>             return ObjectUtils.toString(first);
>         }
> 
>         
2641a2653,2656
>         if (first != null) {
>             buf.append(first);
>         }
> 
2642a2658
>             buf.append(separator);
2647,2649d2662
<             if (iterator.hasNext()) {
<                 buf.append(separator);
<             }
2650a2664
> 
2667a2682,2683
> 
>         
2670a2687,2695
>         if (!iterator.hasNext()) {
>             return EMPTY;
>         }
>         Object first = iterator.next();
>         if (!iterator.hasNext()) {
>             return ObjectUtils.toString(first);
>         }
> 
>         
2671a2697,2700
>         if (first != null) {
>             buf.append(first);
>         }
> 
2672a2702,2704
>             if (separator != null) {
>                 buf.append(separator);
>             }
2676,2678d2707
<             }
<             if ((separator != null) && iterator.hasNext()) {
<                 buf.append(separator);
