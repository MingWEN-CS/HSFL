190a191,208
>         StringBuffer arrayPrefix = new StringBuffer();
> 
>         
>         if (className.startsWith("[")) {
>             while (className.charAt(0) == '[') {
>                 className = className.substring(1);
>                 arrayPrefix.append("[]");
>             }
>             
>             if (className.charAt(0) == 'L' && className.charAt(className.length() - 1) == ';') {
>                 className = className.substring(1, className.length() - 1);
>             }
>         }
> 
>         if (reverseAbbreviationMap.containsKey(className)) {
>             className = reverseAbbreviationMap.get(className);
>         }
> 
198c216
<         return out;
---
>         return out + arrayPrefix;
227c245
<         return cls.getPackage().getName();
---
>         return getPackageName(cls.getName());
240c258
<         if (className == null) {
---
>         if (className == null || className.length() == 0) {
242a261,270
> 
>         
>         while (className.charAt(0) == '[') {
>             className = className.substring(1);
>         }
>         
>         if (className.charAt(0) == 'L' && className.charAt(className.length() - 1) == ';') {
>             className = className.substring(1);
>         }
> 
