24a25
> import org.apache.commons.lang.StringUtils;
36a38,39
> 
> 
59d61
< 
63a66,68
>     
> 
> 
70a76,81
>         
> 
> 
> 
> 
> 
100a112,119
>         
> 
> 
> 
> 
> 
> 
> 
120,121c139,142
<                         sb.append(START_FMT).append(
<                                 metaFormat.format(formats[fe]));
---
>                         String formatName = metaFormat.format(formats[fe]);
>                         if (StringUtils.isNotEmpty(formatName)) {
>                             sb.append(START_FMT).append(formatName);
>                         }
131a153,159
>         
> 
> 
> 
> 
> 
> 
145d172
<                         result.add(metaFormat.parseObject(pattern, pos));
146a174
>                     result.add(metaFormat.parseObject(pattern, pos));
160a189,194
>         
> 
> 
> 
> 
> 
169a204,209
>         
> 
> 
> 
> 
> 
174a215,221
>         
> 
> 
> 
> 
> 
> 
191a239,248
>         
> 
> 
> 
> 
> 
> 
> 
> 
> 
203,204c260,261
<                     appendTo.append(c, lastHold, pos.getIndex() - lastHold).append(
<                             QUOTE);
---
>                     appendTo.append(c, lastHold, pos.getIndex() - lastHold)
>                             .append(QUOTE);
221a279,285
>         
> 
> 
> 
> 
> 
> 
226a291,296
>         
> 
> 
> 
> 
> 
264d333
< 
265a335,348
>         this(pattern, Locale.getDefault(), metaFormat);
>     }
> 
>     
> 
> 
> 
> 
> 
> 
> 
> 
>     public ExtendedMessageFormat(String pattern, Locale locale,
>             Format metaFormat) {
273c356
<         super(pattern);
---
>         super(pattern, locale);
283d365
< 
335d416
< 
