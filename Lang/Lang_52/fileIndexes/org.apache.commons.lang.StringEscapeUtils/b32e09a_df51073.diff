187c187
<                 out.write("\\u" + Integer.toHexString(ch));
---
>                 out.write("\\u" + hex(ch));
189c189
<                 out.write("\\u0" + Integer.toHexString(ch));
---
>                 out.write("\\u0" + hex(ch));
191c191
<                 out.write("\\u00" + Integer.toHexString(ch));
---
>                 out.write("\\u00" + hex(ch));
216c216
<                             out.write("\\u00" + Integer.toHexString(ch));
---
>                             out.write("\\u00" + hex(ch));
218c218
<                             out.write("\\u000" + Integer.toHexString(ch));
---
>                             out.write("\\u000" + hex(ch));
243a244,247
>     private static String hex(char ch) {
>         return Integer.toHexString(ch).toUpperCase();
>     }
> 
270a275
>                 unicode.append(ch);
278d282
<                         unicode.setLength(4);
284,286d287
<                 } else {
<                     unicode.append(ch);
<                     continue;
287a289
>                 continue;
