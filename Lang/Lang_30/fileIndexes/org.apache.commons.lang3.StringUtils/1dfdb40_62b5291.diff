2945c2945,2946
<         int increase = with.length() - repl.length();
---
>         int replLength = repl.length();
>         int increase = with.length() - replLength;
2951c2952
<             start = end + repl.length();
---
>             start = end + replLength;
3034,3035c3035,3038
<         StringBuffer buf = new StringBuffer(str.length());
<         for (int i = 0; i < str.length(); i++) {
---
>         int replaceCharsLength = replaceChars.length();
>         int strLength = str.length();
>         StringBuffer buf = new StringBuffer(strLength);
>         for (int i = 0; i < strLength; i++) {
3040c3043
<                 if (index < replaceChars.length()) {
---
>                 if (index < replaceCharsLength) {
