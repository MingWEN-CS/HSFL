63,64c63,69
<             
<             out.write(entityValue);
---
>             if(entityValue > 0xFFFF) {
>                 char[] chrs = Character.toChars(entityValue);
>                 out.write(chrs[0]);
>                 out.write(chrs[1]);
>             } else {
>                 out.write(entityValue);
>             }
