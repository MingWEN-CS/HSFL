83c83
<         int len = input.length();
---
>         int len = Character.codePointCount(input, 0, input.length());
89,90d88
<                 pos+= c.length;
<                 continue;
91a90
>             else {
94a94
>                     if (pos < len - 2) {
95a96,100
>                     } else {
>                         pos++;
>                     }
>                 }
>                 pos--;
96a102
>             pos++;
