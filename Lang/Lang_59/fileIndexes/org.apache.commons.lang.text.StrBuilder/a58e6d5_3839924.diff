1695,1705c1695,1709
<         if (strLen > 0 && strLen <= size) {
<             if (strLen == 1) {
<                 return indexOf(str.charAt(0), startIndex);
<             }
<             char[] thisBuf = buffer;
<             outer:
<             for (int i = startIndex; i < thisBuf.length - strLen; i++) {
<                 for (int j = 0; j < strLen; j++) {
<                     if (str.charAt(j) != thisBuf[i + j]) {
<                         continue outer;
<                     }
---
>         if (strLen == 1) {
>             return indexOf(str.charAt(0), startIndex);
>         }
>         if (strLen == 0) {
>             return startIndex;
>         }
>         if (strLen > size) {
>             return -1;
>         }
>         char[] thisBuf = buffer;
>         outer:
>         for (int i = startIndex; i < thisBuf.length - strLen; i++) {
>             for (int j = 0; j < strLen; j++) {
>                 if (str.charAt(j) != thisBuf[i + j]) {
>                     continue outer;
1707d1710
<                 return i;
1709,1711c1712
<             
<         } else if (strLen == 0) {
<             return 0;
---
>             return i;
1748,1753c1749,1752
<         if (len > 0) {
<             char[] buf = buffer;
<             for (int i = startIndex; i < len; i++) {
<                 if (matcher.isMatch(buf, i, startIndex, len) > 0) {
<                     return i;
<                 }
---
>         char[] buf = buffer;
>         for (int i = startIndex; i < len; i++) {
>             if (matcher.isMatch(buf, i, startIndex, len) > 0) {
>                 return i;
1870,1877c1869,1873
<         int len = size;
<         if (len > 0) {
<             char[] buf = buffer;
<             int endIndex = startIndex + 1;
<             for (int i = startIndex; i >= 0; i--) {
<                 if (matcher.isMatch(buf, i, 0, endIndex) > 0) {
<                     return i;
<                 }
---
>         char[] buf = buffer;
>         int endIndex = startIndex + 1;
>         for (int i = startIndex; i >= 0; i--) {
>             if (matcher.isMatch(buf, i, 0, endIndex) > 0) {
>                 return i;
