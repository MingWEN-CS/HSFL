2946,2948c2946,2949
<         Object newArray = copyArrayGrow1(array, element != null ? element.getClass() : Object.class);
<         Array.set(newArray, lastIndex(newArray), element);
<         return (Object[]) newArray;
---
>         Class type = (array != null ? array.getClass() : (element != null ? element.getClass() : Object.class));
>         Object[] newArray = (Object[]) copyArrayGrow1(array, type);
>         newArray[newArray.length - 1] = element;
>         return newArray;
2974c2975
<         newArray[lastIndex(newArray)] = element;
---
>         newArray[newArray.length - 1] = element;
3001c3002
<         newArray[lastIndex(newArray)] = element;
---
>         newArray[newArray.length - 1] = element;
3028c3029
<         newArray[lastIndex(newArray)] = element;
---
>         newArray[newArray.length - 1] = element;
3055c3056
<         newArray[lastIndex(newArray)] = element;
---
>         newArray[newArray.length - 1] = element;
3082c3083
<         newArray[lastIndex(newArray)] = element;
---
>         newArray[newArray.length - 1] = element;
3109c3110
<         newArray[lastIndex(newArray)] = element;
---
>         newArray[newArray.length - 1] = element;
3136c3137
<         newArray[lastIndex(newArray)] = element;
---
>         newArray[newArray.length - 1] = element;
3163c3164
<         newArray[lastIndex(newArray)] = element;
---
>         newArray[newArray.length - 1] = element;
