65a66
> 
66a68
> 
68a71,73
>     
> 
> 
104,105c109,115
<             buf.append((char)(value / 10 + '0'));
<             buf.append((char)(value % 10 + '0'));
---
>             
>             
>             
>             int d = ((value + 1) * 13421772) >> 27;
>             buf.append((char) (d + '0'));
>             
>             buf.append((char) (value - (d << 3) - (d << 1) + '0'));
193,194c203,209
<             out.write(value / 10 + '0');
<             out.write(value % 10 + '0');
---
>             
>             
>             
>             int d = ((value + 1) * 13421772) >> 27;
>             out.write(d + '0');
>             
>             out.write(value - (d << 3) - (d << 1) + '0');
271,272c286,292
<             buf.append((char)(value / 10 + '0'));
<             buf.append((char)(value % 10 + '0'));
---
>             
>             
>             
>             int d = ((value + 1) * 13421772) >> 27;
>             buf.append((char) (d + '0'));
>             
>             buf.append((char) (value - (d << 3) - (d << 1) + '0'));
318,319c338,344
<             out.write(value / 10 + '0');
<             out.write(value % 10 + '0');
---
>             
>             
>             
>             int d = ((value + 1) * 13421772) >> 27;
>             out.write(d + '0');
>             
>             out.write(value - (d << 3) - (d << 1) + '0');
367a393,414
> 
>     static String createErrorMessage(final String text, final int errorPos) {
>         int sampleLen = errorPos + 20;
>         String sampleText;
>         if (text.length() <= sampleLen + 3) {
>             sampleText = text;
>         } else {
>             sampleText = text.substring(0, sampleLen).concat("...");
>         }
>         
>         if (errorPos <= 0) {
>             return "Invalid format: \"" + sampleText + '"';
>         }
>         
>         if (errorPos >= text.length()) {
>             return "Invalid format: \"" + sampleText + "\" is too short";
>         }
>         
>         return "Invalid format: \"" + sampleText + "\" is malformed at \"" +
>             sampleText.substring(errorPos) + '"';
>     }
> 
