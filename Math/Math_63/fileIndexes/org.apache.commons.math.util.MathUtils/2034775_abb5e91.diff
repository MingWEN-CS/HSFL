61a62,64
>     private static final int NAN_GAP = 4 * 1024 * 1024;
>     private static final long SGN_MASK = 0x8000000000000000L;
> 
408a412,444
>     
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
>     public static boolean equals(double x, double y, int maxUlps) {
>         
>         
>         assert maxUlps > 0 && maxUlps < NAN_GAP;
> 
>         long xInt = Double.doubleToLongBits(x);
>         long yInt = Double.doubleToLongBits(y);
> 
>         
>         if (xInt < 0) {
>             xInt = SGN_MASK - xInt;
>         }
>         if (yInt < 0) {
>             yInt = SGN_MASK - yInt;
>         }
> 
>         return Math.abs(xInt - yInt) <= maxUlps;
>     }
> 
