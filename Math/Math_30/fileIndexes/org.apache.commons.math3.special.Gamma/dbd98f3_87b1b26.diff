116,119c116,119
<         if (a <= 0.0) {
<             throw new IllegalArgumentException("a must be positive");
<         } else if (x <= 0.0) {
<             throw new IllegalArgumentException("x must be non-negative");
---
>         if (Double.isNaN(a) || Double.isNaN(x) || (a <= 0.0) || (x < 0.0)) {
>             ret = Double.NaN;
>         } else if (x == 0.0) {
>             ret = 0.0;
168,170c168,169
<         if (x <= 0.0) {
<             throw new IllegalArgumentException(
<                 "x must be non-negative");
---
>         if (Double.isNaN(x) || (x <= 0.0)) {
>             ret = Double.NaN;
