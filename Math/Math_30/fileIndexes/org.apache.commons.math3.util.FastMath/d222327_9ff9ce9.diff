3788c3788,3804
<         return (a <= b) ? a : ((a!=a||b!=b) ? Float.NaN : b);
---
>         if (a > b) {
>             return b;
>         }
>         if (a < b) {
>             return a;
>         }
>         
>         if (a != b) {
>             return Float.NaN;
>         }
>         
>         
>         int bits = Float.floatToRawIntBits(a);
>         if (bits == 0x80000000) {
>             return a;
>         }
>         return b;
3797c3813,3829
<         return (a <= b) ? a : ((a!=a||b!=b) ? Double.NaN : b);
---
>         if (a > b) {
>             return b;
>         }
>         if (a < b) {
>             return a;
>         }
>         
>         if (a != b) {
>             return Double.NaN;
>         }
>         
>         
>         long bits = Double.doubleToRawLongBits(a);
>         if (bits == 0x8000000000000000L) {
>             return a;
>         }
>         return b;
3824c3856,3872
<         return (a < b) ? b : ((a!=a||b!=b) ? Float.NaN : a);
---
>         if (a > b) {
>             return a;
>         }
>         if (a < b) {
>             return b;
>         }
>         
>         if (a != b) {
>             return Float.NaN;
>         }
>         
>         
>         int bits = Float.floatToRawIntBits(a);
>         if (bits == 0x80000000) {
>             return b;
>         }
>         return a;
3833c3881,3897
<         return (a <= b) ? b : ((a!=a||b!=b) ? Double.NaN : a);
---
>         if (a > b) {
>             return a;
>         }
>         if (a < b) {
>             return b;
>         }
>         
>         if (a != b) {
>             return Double.NaN;
>         }
>         
>         
>         long bits = Double.doubleToRawLongBits(a);
>         if (bits == 0x8000000000000000L) {
>             return b;
>         }
>         return a;
