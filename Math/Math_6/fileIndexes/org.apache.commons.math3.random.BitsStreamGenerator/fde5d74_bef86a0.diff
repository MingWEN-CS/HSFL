123d122
<     public int nextInt(int n) throws IllegalArgumentException {
125,127d123
<         if (n < 1) {
<             throw new NotStrictlyPositiveException(n);
<         }
129,140c125,140
<         
<         int mask = n;
<         mask |= mask >> 1;
<         mask |= mask >> 2;
<         mask |= mask >> 4;
<         mask |= mask >> 8;
<         mask |= mask >> 16;
< 
<         while (true) {
<             final int random = next(32) & mask;
<             if (random < n) {
<                 return random;
---
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
>     public int nextInt(int n) throws IllegalArgumentException {
>         if (n > 0) {
>             if ((n & -n) == n) {
>                 return (int) ((n * (long) next(31)) >> 31);
141a142,148
>             int bits;
>             int val;
>             do {
>                 bits = next(31);
>                 val = bits % n;
>             } while (bits - val + (n - 1) < 0);
>             return val;
143c150
< 
---
>         throw new NotStrictlyPositiveException(n);
