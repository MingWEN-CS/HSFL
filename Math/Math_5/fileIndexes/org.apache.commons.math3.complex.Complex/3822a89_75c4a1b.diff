18c18
< package org.apache.commons.math.complex;
---
> package org.apache.commons.math3.complex;
24,29c24,29
< import org.apache.commons.math.FieldElement;
< import org.apache.commons.math.exception.NullArgumentException;
< import org.apache.commons.math.exception.NotPositiveException;
< import org.apache.commons.math.exception.util.LocalizedFormats;
< import org.apache.commons.math.util.MathUtils;
< import org.apache.commons.math.util.FastMath;
---
> import org.apache.commons.math3.FieldElement;
> import org.apache.commons.math3.exception.NullArgumentException;
> import org.apache.commons.math3.exception.NotPositiveException;
> import org.apache.commons.math3.exception.util.LocalizedFormats;
> import org.apache.commons.math3.util.MathUtils;
> import org.apache.commons.math3.util.FastMath;
1018c1018
<         if (isNaN) {
---
>         if (isNaN || Double.isInfinite(real)) {
1020a1021,1026
>         if (imaginary > 20.0) {
>             return createComplex(0.0, 1.0);
>         }
>         if (imaginary < -20.0) {
>             return createComplex(0.0, -1.0);
>         }
1063c1069
<         if (isNaN) {
---
>         if (isNaN || Double.isInfinite(imaginary)) {
1066c1072,1077
< 
---
>         if (real > 20.0) {
>             return createComplex(1.0, 0.0);
>         }
>         if (real < -20.0) {
>             return createComplex(-1.0, 0.0);
>         }
